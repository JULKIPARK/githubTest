<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{backoffice/layout/defaultLayout}">

	<!-- popup Fragment -->
	<!-- detail form -->
	<th:block th:fragment="srcDetailPop">
		<script type="text/javascript">
			$.fn.clearForm = function () {
				return this.each(function () {
					var type = this.type,
							tag = this.tagName.toLowerCase();
					if (tag === "form") {
						return $(":input", this).clearForm();
					}
					if (
							type === "text" ||
							type === "password" ||
							type === "hidden" ||
							tag === "textarea"
					) {
						this.value = "";
					} else if (type === "checkbox" || type === "radio") {
						this.checked = false;
					} else if (tag === "select") {
						this.selectedIndex = -1;
					}
				});
			};

			function initializeForm() {
				$("#srcDetailPopFrm").clearForm();
			}
			function initializeEvents() {
			}

			function fnSrcDetailPop(srcUid) {
				if (srcUid !== '') {
					$('#srcUid').val(srcUid);		//출처채번

					var formData, param = {};
					formData = _formLib.getFormData("srcDetailPopFrm");

					var param = {
						"url": "/sems/contents/selectSrcDetailView"
						, "type": "post"
						, "data": formData
						, "async": false
						, "callback": function (fragment) {
							$("#srcDetailPopListDiv").replaceWith(fragment);
							// $("#srcDetailPopTotalCountView").text("총 "+ _formLib.addComma($("#srcDetailPopTotalCount").val()) + "건");

							//페이징처리
							var currPage = $('#srcDetailPopPageNum').val();//현재 선택된 페이지
							$('#srcDetailPopPageNum').empty();//페이지 option 삭제
							for(var count = 1; count <= $("#srcDetailPopTotalPage").val(); count++) {
								var selTxt = "";
								if (count == currPage) {
									selTxt = "selected='selected'";//현재 페이지 선택
								}

								var option = $("<option value='" + count + "' " + selTxt + ">" + count + "/" + $(
										"#srcDetailPopTotalPage").val() + "</option>");
								$('#srcDetailPopPageNum').append(option);
							}
						}
					};
					_comLib.callAjax(param);

					$('#srcDetailPop').addClass('show');
					$('.dimmed').removeAttr('style');
				}
			}
		</script>

		<!-- modal-wrap -->
		<div id="srcDetailPop" class="modal-wrap"><!-- class="show" 제거시 비노출 default가 hidden 처리 -->
			<div class="dimmed"></div>
			<div class="xycenter">
				<section class="modal-area large">
					<div class="modal-head">
						<h2 class="tit">출처 상세 조회</h2>
						<button type="button" class="btn-close bf"><span class="blind">닫기</span></button>
					</div>
					<section class="modal-cont">
						<div id="srcDetailPopListDiv" class="form-content">
							<form id="srcDetailPopFrm" action="srcDetailPopFrm">
								<input type="hidden" name="srcUid" id="srcUid">
								<fieldset>
									<legend>출처 상세 조회</legend>
									<div class="search-wrap">
										<div class="table-wrap">
											<table class="inner-input align-left">
												<caption>출처 상세 조회</caption>
												<colgroup>
													<col style="width: 15%;">
													<col style="width: 20%;">
													<col style="width: 15%;">
													<col style="width: 20%;">
													<col style="width: 15%;">
													<col style="width: *;">
												</colgroup>
												<tbody>
												<th:block th:if="${#maps.isEmpty(info)}">
													<tr>
														<th>출처명</th>
														<td></td>
														<th>출처번호</th>
														<td colspan="3"></td>
													</tr>
													<tr>
														<th>국내/해외</th>
														<td colspan="5"></td>
													</tr>
													<tr>
														<th>컨텐츠 수 합계</th>
														<td></td>
														<th>문서컨텐츠 수</th>
														<td></td>
														<th>영상컨텐츠 수</th>
														<td></td>
													</tr>
												</th:block>
												<th:block th:unless="${#maps.isEmpty(info)}">
													<tr>
														<th>출처명</th>
														<td th:text="${info.srcNm}">GRI</td>
														<th>출처번호</th>
														<td colspan="3" th:text="${info.srcUno}">F00097</td>
													</tr>
													<tr>
														<th>국내/해외</th>
														<td colspan="5" th:text="${info.dmstcYn}">국내</td>
													</tr>
													<tr>
														<th>컨텐츠 수 합계</th>
														<td th:text="${info.contTotCnt}">105개</td>
														<th>문서컨텐츠 수</th>
														<td th:text="${info.contDocCnt}">55개</td>
														<th>영상컨텐츠 수</th>
														<td th:text="${info.contMovCnt}">50개</td>
													</tr>
												</th:block>
											</table>
										</div>
									</div>
									<!-- //table-wrap -->
									<div class="result-wrap">
										<div class="sorting-wrap">
											<select name="srcDetailPopPageSize" id="srcDetailPopPageSize" class="select" title="데이터 건수">
												<option value="20">20개</option>
												<option value="50">50개</option>
												<option value="100" selected="selected">100개</option>
												<option value="500">500개</option>
												<option value="1000">1000개</option>
											</select>
											<select name="srcDetailPopPageNum" id="srcDetailPopPageNum" class="select" title="페이지 이동선택">
											</select>
											<div class="btn-ctl">
												<button type="button" id="btnDownload" class="btn-download">다운로드</button>
											</div>
										</div>
										<!-- //sorting-wrap -->
										<div class="table-wrap ">
											<!-- 페이징 정보 -->
											<th:block th:unless="${#lists.isEmpty(list)}">
												<input type="hidden" id="srcDetailPopTotalCount" th:value="${PageInfo.totalCount}"/>
												<input type="hidden" id="srcDetailPopPageNumber" th:value="${PageInfo.pageNumber}"/>
												<input type="hidden" id="srcDetailPopTotalPage" th:value="${PageInfo.totalPage}"/>
											</th:block>
											<table>
												<caption>출처 리스트</caption>
												<colgroup>
													<col style="width: 5%;">
													<col style="width: 5%;">
													<col style="width: 10%;">
													<col style="width: *;">
													<col style="width: 7%;">
													<col style="width: 10%;">
													<col style="width: 7%;">
													<col style="width: 10%;">
													<col style="width: 10%;">
													<col style="width: 7%;">
												</colgroup>
												<thead>
												<tr>
													<th>NO</th>
													<th>종류</th>
													<th>컨텐츠 번호</th>
													<th>컨텐츠명</th>
													<th>언어</th>
													<th>유형분류</th>
													<th>업무분류</th>
													<th>주제분류</th>
													<th>등록방식</th>
													<th>형태</th>
												</tr>
												</thead>
												<tbody>
												<tr th:each="item, stat : ${list}">
													<td th:text="${stat.count}">1</td>
													<td th:text="${item.contKindCdNm}">문서</td>
													<td><a th:text="${item.contUno}" th:onclick="fnContentPop([[${item.contUno}]]);" class="link">CDIA00012</a></td>
													<td class="left" th:text="${item.contNm}">GRI 1: Foundation 2021</td>
													<td th:text="${item.splyLangCdNm}">영문</td>
													<td th:text="${item.contTpLclsfCdNm}">기준/표준</td>
													<td th:text="${item.taskClsfCdNm}">공시</td>
													<td>ESG일반</td>
													<td th:text="${item.contRmthdCdNm}">컨텐츠업로드</td>
													<td>E-pub</td>
												</tr>
												<tr th:if="${#lists.isEmpty(list)}">
													<td class="nodata" colspan="10">데이터가 존재하지 않습니다.</td>
												</tr>
												</tbody>
											</table>
										</div>
										<!-- //table-wrap -->
									</div>
									<!-- //result-list -->
									<div class="btn-wrap">
										<button type="button" id="btnClose" class="btn-sub btn-close">닫기</button>
									</div>
									<!-- //btn-wrap -->
								</fieldset>
							</form>
						</div>
						<!-- form-content -->
					</section>
					<!--//modal-cont-->
				</section>
				<!--//modal-area-->
			</div>
			<!-- //xycenter -->
		</div>
		<!--//modal-wrap-->
	</th:block>
</html>
